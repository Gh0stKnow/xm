{include file="public:header" /}
<link rel="stylesheet" href="/comfile/css/index.css"/>


<!-- banner部分 -->

<div class="banner-box"  id="banner_qq_" >
    <div id="slider_index" class="slider" style="height:700px;">
        <div class="slider-loading" data-u="loading">
            <div class="slider-loading-a"></div>
            <div class="slider-loading-b"></div>
        </div>

        <div class="slider-body" data-u="slides">
            <div>
                <img src="/picture/banner.png" alt="banner.png" style="height:100%;">
                <div class="bannerText">
                    <h1>HUOCOIN全球加速</h1>
                    <p>HUOCOIN Global Acceleration</p>
                    <h3>官网节点HUOCOIN.COM<b>HUOCOIN.COM全球分布,请选择速度最快的节点使用!</b></h3>
                    <a href="https://www.huocoin.com" class="iconfont icon-XG"><span>huocoin.com</span></a>
                    <a href="https://www.huowang.top" class="iconfont icon-JN"><span>huowang.top</span></a>
                    <a href="http://www.huocoin.vip" class="iconfont icon-ZH"><span>huocoin.vip</span></a>
                </div>
            </div>
            {foreach $indexAdver as $vo} 
                <div  onclick="window.location.href='{$vo['url']}'">
                    <a src="" ><img data-u="image" title="" alt="" src="upload/ad/{$vo.img}"/></a>
                </div>
           {/foreach}
            
        </div>

        <div id="slider-body-navigator_index" class="sbn-3" data-u="navigator" style="position: absolute;bottom: 135px;" data-autocenter="1">
            <div data-u="prototype" style=""></div>
        </div>
        <span id="slider-body-arrow-l_index" data-u="arrowleft" class="slider-body-arrowleft-1" data-autocenter="2"></span>
        <span id="slider-body-arrow-r_index" data-u="arrowright" class="slider-body-arrowright-1" data-autocenter="2"></span>
    </div>
    <textarea class="mv-hide" style="display: none;">
        slider_run("slider_index", [{"$Duration":1200,"x":0.3,"$SlideOut":true,"$Easing":{},"$Opacity":2}]);
    </textarea>
</div>



<!--表格数据转化成tradeBox_wrp动画-->
<div class="tradeBox_wrp">
    <!-- tradeBox_wrp动画子容器 -->
	<ul class="price_today_ul" id="price_today_ul"></ul>
    <script src="/comfile/js/jquery.flot.js"></script>
    <script>
                $('.price_today_ull > .click-sort').each(function () {
            $(this).click(function () {
                click_sortList(this);
            })
        })
        function allcoin_callback(priceTmp) {
            for (var i in priceTmp) {
                var c = priceTmp[i][8];
                if (typeof (trends[c]['data']) && typeof (trends[c]['data']) != 'null') {
                    if (typeof (trends[c]) != 'undefined' && typeof (trends[c]['data']) != 'undefined') {
                        $.plot($("#" + c + "_plot"), [{shadowSize: 0, data: trends[c]['data']}], {
                            grid: {borderWidth: 0},
                            xaxis: {mode: "time", ticks: false},
                            yaxis: {tickDecimals: 0, ticks: false},
                            colors: ['#fb0803']//k线颜色
                        });
                    }
                }
            }
        }
        function click_sortList(sortdata) {
            var a = $(sortdata).attr('data-toggle');
            var b = $(sortdata).attr('data-sort');
            $(".price_today_ull > li").find('.cagret-up').css('border-bottom-color', '#848484');
            $(".price_today_ull > li").find('.cagret-down').css('border-top-color', '#848484');
            $(".price_today_ull > li").attr('data-flaglist', 0).attr('data-toggle', 0);
            $(".price_today_ull > li").css('color', '');
            $(sortdata).css('color', '#FB1D1D');
            if (a == 0) {
                priceTmp = priceTmp.sort(sortcoinList('dec', b));
                $(sortdata).find('.cagret-down').css('border-top-color', '#FB1D1D');
                $(sortdata).find('.cagret-up').css('border-bottom-color', '#848484');
                $(sortdata).attr('data-flaglist', 1).attr('data-toggle', 1)
            }
            else if (a == 1) {
                $(sortdata).attr('data-toggle', 0).attr('data-flaglist', 2);
                ;
                $(sortdata).find('.cagret-up').css('border-bottom-color', '#FB1D1D');
                $(sortdata).find('.cagret-down').css('border-top-color', '#848484');
                priceTmp = priceTmp.sort(sortcoinList('asc', b));
            }
            renderPage(priceTmp);
            change_line_bg('price_today_ul', 'li');
            allcoin_callback(priceTmp);
        }
        function trends() {
            $.getJSON("{:url('Ajax/index_b_trends')}",{t:Math.random()}, function (d) {
                trends = d;
                allcoin();
            });
        }
        function allcoin() {
            var trade_qu_id = $('.trade_qu_list .current').attr('data');
            $.get("{:url('ajax/allcoin_a')}",{id:trade_qu_id,t:Math.random()}, function (data) {
                var d;
                if (data.status == 1) {
                    d = data.url;
                }
                ALLCOIN  = d;
                var t    = 0;
                var img  = '';
                priceTmp = [];
                for (var x in d) {
                    if (typeof(trends[x]) != 'undefined' && parseFloat(trends[x]['yprice']) > 0) {
                        rise1 = (((parseFloat(d[x][4]) + parseFloat(d[x][5])) / 2 - parseFloat(trends[x]['yprice'])) * 100) / parseFloat(trends[x]['yprice']);
                        rise1 = rise1.toFixed(2);
                    } else {
                        rise1 = 0;
                    }
                    img = d[x].pop();
                    d[x].push(rise1);
                    d[x].push(x);
                    d[x].push(img);
                    priceTmp.push(d[x]);
                }
                $('.price_today_ull > .click-sort').each(function () {
                    var listId = $(this).attr('data-sort');
                    if ($(this).attr('data-flaglist') == 1 && $(this).attr('data-sort') !== 0) {
                        priceTmp = priceTmp.sort(sortcoinList('dec', listId))
                    } else if ($(this).attr('data-flaglist') == 2 && $(this).attr('data-sort') !== 0) {
                        priceTmp = priceTmp.sort(sortcoinList('asc', listId))
                    }
                });
                renderPage(priceTmp);
                allcoin_callback(priceTmp);
                change_line_bg('price_today_ul', 'li');
                // t = setTimeout('allcoin()', 5000);
            }, 'json');
        }
        // __DOMAIN__/upload/coin
        function renderPage(ary) {
            var html = '';
            for (var i in ary) {
                var coinfinance = 0;
                if (typeof FINANCE == 'object') coinfinance = parseFloat(FINANCE.data[ary[i][8] + '_balance']);
                html += '<li><a href="/trade/index/market/' + ary[i][8] + '/">' +
                    '<img src="__DOMAIN__/Upload/coin/' + ary[i][9] + '" style="vertical-align: middle;margin-right: 5px;width: 19px;margin-left:5px;">' + ary[i][0] +
                    '<span style="margin-left:10px">' +
                     (parseFloat(ary[i][7]) < 0 ? '' : '+') +  

                     ((parseFloat(ary[i][7]) < 0.01 && parseFloat(ary[i][7]) > -0.01) ? "0.00" : (parseFloat(ary[i][7])).toFixed(2)) +'%</span>'+
                    '<br><b style="color:#fff;margin-right:3px">' +ary[i][1] +'</b>'+formatCount(ary[i][6])+
                    '<input type="button" value="{:lang(\'GO_TRADE\')}" style="height:20px" onclick="top.location=\'/trade/index/market/'+ 
                    ary[i][8] + '/\'" />'+'</a>'+'<dd id="' + ary[i][8] + '_plot"  style="width:100px;height:60px;"></dd></li>'
            }
            $('#price_today_ul').html(html);
        }
        function formatCount(count) {
            var countokuu = (count / 100000000).toFixed(3)
            var countwan  = (count / 10000).toFixed(3)
            if (count > 100000000)
                return countokuu.substring(0, countokuu.lastIndexOf('.') + 3) + '{:lang(\'BILLION\')}'
            if (count > 10000)
                return countwan.substring(0, countwan.lastIndexOf('.') + 3) + '万'
            else
                return count
        }
        //交易列表底部背景颜色
        function change_line_bg(id, tag, nobg) {
            var oCoin_list = $('#' + id);
            var oC_li      = oCoin_list.find(tag);
            var oInp       = oCoin_list.find('input');
            var oldCol     = null;
            var newCol     = null;
            if (!nobg) {
                for (var i = 0; i < oC_li.length; i++) {
                    oC_li.eq(i).css('background-color', i % 2 ? 'transparent' : 'transparent');
                }
            }
            oCoin_list.find(tag).hover(function () {
                oldCol = $(this).css('backgroundColor');
                $(this).css('background-color', 'transparent');
            }, function () {
                $(this).css('background-color', oldCol);
            })
        }
        function sortcoinList(order, sortBy) {
            var ordAlpah = (order == 'asc') ? '>' : '<';
            var sortFun  = new Function('a', 'b', 'return parseFloat(a[' + sortBy + '])' + ordAlpah + 'parseFloat(b[' + sortBy + '])? 1:-1');
            return sortFun;
        }
        function trade_qu(o){
            $('.trade_qu_pai').removeClass('current');
            $(o).addClass('current');
            allcoin();
        }
        trends();
        // tradeBox_wrp循环动画
        window.onload=function(){
            var el=$('#price_today_ul');
            var moving;
            el.hover(function(){
                clearInterval(moving);
            },function(){
                moving=setInterval(function(){
                    var firsChild=el.find('li:first');
                    var w=firsChild.width();
                    firsChild.animate({marginLeft:-w+'px'},600,function(){
                        firsChild.css('marginLeft',0).appendTo(el);
                    });
                },3000)
            }).trigger('mouseleave');
        }

    </script>
        
</div>

<!-- 新手帮助 -->
<div class="userHelp">
    <dl class="MWCenter">
        <h1>{:lang('help')}<span>-{:lang('Provide')}</span></h1>
        <dd style="padding: 36px  20px;">
        <i class="iconfont icon-identity"></i>
        <h2 class="inlineBlockMiddle">{:lang('REAL_NAME_VERIFY')}
            <span>
                <a href="/Article/detail/id/77" target="_self" class="left">{:lang('Real')}</a>
            </span>
        </h2>
        </dd> 
          <dd>
            <i class="iconfont icon-moneyNum"></i>
            <h2 class="inlineBlockMiddle">{:lang('Digitalassets')}
                <span>
                    <br href="/Article/detail/id/76" target="_self" class="left">{:lang('Aguide')} </br></a>
                    <a href="/Article/detail/id/75" target="_self" class="left">{:lang('Guideto')}</a>
                </span>
            </h2>
        </dd> 
        <dd style="padding: 36px 20px;">
           <i class="iconfont icon-netSilver"></i>
           <h2 class="inlineBlockMiddle">{:lang('Rechargeandcash')}
                <span>
                    <a href="/Article/detail/id/74" target="_self" class="left">{:lang('Guidetocash')} </a>
                    </br>
                    <a href="/Article/detail/id/73" target="_self" class="left">{:lang('RechargeGuide')}</a>
                </span>
            </h2>
        </dd> 
        <dd>
            <i class="iconfont icon-more"></i>
            <h2 class="inlineBlockMiddle">{:lang('Moreoperations')}
                <span>
                    <a href="/Article/detail/id/71" target="_self" class="left">{:lang('RegistrationGuide')}</a>
                    </br>
                    <a href="/Article/detail/id/92" target="_self" class="left">{:lang('Guidetotransferof')}</a>
                    </br>
                    <a href="/Article/detail/id/90" target="_self" class="left">{:lang('HuaKejinGuide')}</a>
                </span>
            </h2>
        </dd>
    </dl>
</div> 
<!-- 公司公告和行业资讯 -->
<div class="noticeTrade">
    <div class="MWCenter">
        <div class="index_media inlineBlockMiddle">
	            <h2>{$indexArticleType[1]['title']}
	                <a href="/Article/index/id/{$indexArticleType[1]['id']}" target="_blank">更多</a>
	            </h2>
            <ul class="index_media_ul1">
            	{foreach $indexArticle[1] as $vo} 
                    <li class="">
                        <a href="{:url('/Article/detail','id='.$vo['id'],'','')}" target="_blank" class="inlineBlockMiddle" >{$vo['title']}</a>
                        <span>{$vo['addtime']|date='Y-m-d',###}</span>
                    </li>
                {/foreach}
            </ul>
        </div>
        <div class="index_media index_media1 ml35 inlineBlockMiddle">
            <h2>{$indexArticleType[0]['title']}
                <a href="/Article/index/id/{$indexArticleType[1]['id']}" target="_blank">更多</a></h2>
            <ul class="index_media_ul1 index_media_ul3">
            	{foreach $indexArticle[0] as $vo} 
	                <li class="">
	                    <a href="{:url('/Article/detail','id='.$vo['id'],'','')}" target="_blank" class="inlineBlockMiddle">{$vo['title']}</a>
	                    <span>{$vo['addtime']|date='Y-m-d',###}</span>
	                </li>
                {/foreach}
            </ul>
        </div>
    </div>
</div>


{include file="public:footer" /}
<script>
    var move_moble = $.cookies.get('move_moble');
    $(function () {
        var userid = "";
        if (window.location.hash == '#login') {
            if (!userid) {
                loginpop();
            }
        }

        var move_moble = $.cookies.get('move_moble');     
        if (move_moble != '' && move_moble != null) {

            $("#login_moble").val(move_moble);
        }
    });

    function loginpop() {
        var height = $(document).height();
        if (height < 1000) {
            height = 1000;
        }
        // $('.all_mask').css({'height': height});
        $('.all_mask').show();
        $('#all_mask_loginbox').show();
    }

    function wrapClose() {
        $('.all_mask').hide();
        $('.all_mask_loginbox').hide();
    }
   
</script>

<script>
    $(document).ready(function () {
        $.each($(".mv-hide"), function () {
            eval($(this).html());
        });
    });

    //回车键登陆
    function keyLogin(){
        if (event.keyCode == 13)  //回车键的键值为13
            footer_login();
    }

    //   排行榜实时
    $(".invite_box").click(function () {
        // console.log($(this).css("right"));
        if($(this).css("right") == "-300px"){
            $(".invite_box").animate({right:'-10px'});

        }else{
            $(".invite_box").animate({right:'-300px'});

        }
    });

    function getRank() {

        $.get('', function (data) {

            t = setTimeout('getRank()', 5000);
        }, 'json');
    }
    function send_moble(type) {
        var moble = $("#login_moble").val();
        if (moble == "" || moble == null) {
            layer.tips("请输入手机号码", '#login_moble', {tips: 2});
            return false;
        }
        $.post("{:url('Verify/ulogin')}", {
            moble: moble,
        }, function (data) {
            if (data.code == 1) {
                layer.msg(data.msg, {icon: 1});
//                $("#vifcode").hide();
//                $("#wait").show();
                $("#out_moble_verify").focus();
               $('#vifcode').attr("disabled", "disabled");
                var obj      = $('#reg_moble_new');
                var wait     = 60;
                var interval = setInterval(function () {
                    obj.html(wait + "{:lang('CODE_SEND_AGAIN')}");
                    wait--;
                    if (wait < 0) {
                        clearInterval(interval);
                        $(".reloadverify_new").click();
                        $("#verify_new").val('');
                        obj.html('<a class="move" onclick="send_new()">{:lang(\'CODE_SEND_NO_AGAIN\')}</a>');
                    }
                    ;
                }, 1000);
            } else {
                layer.msg(data.msg, {icon: 2});
                if (data.url) {
                    window.location = data.url;
                }
            }
        }, "json");
    }
</script>
